<h2 mat-dialog-title>Descuento - {{ data.table.clave }}</h2>

<div mat-dialog-content [inert]="loading">
  <form (ngSubmit)="submit()" [formGroup]="form">
    <div style="display: flex; flex-direction: column; gap: 16px;">
      <div>
        <label style="display: block; margin-bottom: 8px;">Tipo</label>
        <mat-button-toggle-group formControlName="type" style="width: 100%;">
          <mat-button-toggle [value]="1" style="width: 50%;">Porcentual</mat-button-toggle>
          <mat-button-toggle [value]="2" style="width: 50%;">Directo</mat-button-toggle>
        </mat-button-toggle-group>
      </div>

      <mat-form-field style="width: 100%;">
        <mat-label>Porcentaje</mat-label>
        <input matInput [formControl]="form.controls.percentage" currencyMask appCursorEnd
          [options]="{ prefix: '', suffix: ' %' }" style="text-align: right;">
        @if (form.controls.percentage.touched && form.controls.percentage.invalid) {
          <mat-error>Porcentaje invalido</mat-error>
        }
      </mat-form-field>

      <mat-form-field style="width: 100%;">
        <mat-label>Monto</mat-label>
        <input matInput [formControl]="form.controls.amount" currencyMask appCursorEnd style="text-align: right;">
        @if (form.controls.amount.touched && form.controls.amount.invalid) {
          <mat-error>Monto invalido</mat-error>
        }
      </mat-form-field>
    </div>
  </form>
</div>

<div mat-dialog-actions align="end" [inert]="loading">
  <button mat-button (click)="cancel()" [disabled]="form.disabled">Cancelar</button>
  <button mat-flat-button color="primary" (click)="submit()" [disabled]="form.disabled">
    @if (form.disabled) {
      <mat-spinner diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
    }
    Aplicar
  </button>
</div>
